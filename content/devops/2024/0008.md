---
title: "[kubernates] 008. Pod Lifecycle"
date: 2024-03-03
slug: /2024_0008/
description: How a Pod is Created?
image: /images/devops/2024/0008.png #720*430
caption: Photo by Gemini
categories:
  - devops
tags:
  - kubernetes
  - main
draft: false
---
## Pod Creation
1. kubectl → kube-apiserver → etcd → Deployment create
2. kube-controller-manager → Deployment detect → ReplicatSet create
3. kube-controller-manager → ReplicatSet detect → Pod create
4. kube-scheduler → node scheduling for pod → kube-apiserver → kubelet → containerd
5. kubelet → probe check → container

## Service Connection
- kubelet → kube-proxy → request connect network → iptables update → calico connect to container

## Secret Mount
- Mounted on the node's memory area

## HPA
- HPA metrics → kube-controller-manager → metrics-server → kubele -> containerd

## Key Commands
- ```systemctl status kubelet``` : kubelet status check
- ```journalctl -u kubelet | tail -10``` : kubelet logs check
- ```systemctl status containerd``` : containerd status check
- ```journalctl -u containerd | tail -10``` : containerd logs check
- ```kubectl get nodes -o wide``` : node status check
- ```kubectl describe node k8s-master``` : node detail check
- ```kubectl get pods -A -o wide``` : pod status check
- ```kubectl get events -A``` : cluster events check
- ```kubectl events -n anotherclass-123 --types=Warning``` : warning events check
- ```kubectl logs -n anotherclass-123 <pod-name> --tail 10``` : pod logs check
- ```kubectl logs -n anotherclass-123 <pod-name> -f``` : pod logs follow
- ```kubectl logs -n anotherclass-123 <pod-name> --since=1m``` : pod logs from last 1 minute