---
title: "[CKA] 003. Scheduling 1/2"
date: 2026-01-15T00:00:02+09:00
slug: /2026_0004/
description: Taints, Tolerations, Node Selector, Node Affinity, Resource Limits, Resource Quotas, Daemonset, Static Pod
image: /images/devops/2026/cka.jpg #720*430
#caption: Photo by Gemini
categories:
  - devops
tags:
  - cka
draft: false
---

# Schedul
- search for node to deploy pod
- if schaduler is off, pod in pending state
- scheduler check : kubectl get pods -n kube-system
- if nodeName is set in pod spec, scheduler skip scheduling

# Manual Scheduling
```yaml
spec:
  nodeName: node1
```
- kubectl replace --force -f nginx.yaml
- kubectl get pod --watch

# Labels
- tags for kubernets objects
- use selector to find objects with specific labels
- key:value
- kubectl get pods -l app=nginx

* tip : --no-headers | wc -l (counter)

# Annotations
- non-identifying metadata
- larger than labels
- used by tools and libraries
- key:value

# Taints 
- taints : set on nodes to repel pods
- add : kubectl taint nodes [nodename] [Key]=[Value]:[Effect]
- remove : kubectl taint nodes [nodename] [Key]-

# Tolerations
- tolerations : set on pods to Tolerations
```yaml
spec:
  tolerations:
  - key: "key1"
    operator: "Equal"
    value: "value1"
    effect: "NoSchedule"
```

# Node Selector
- kubectl label nodes [node-name] [key]=[value]
```yaml
spec:
  nodeSelector:
    key: value
```

# Node Affinity
- more expressive than nodeSelector
```yaml
spec:
  template:
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: [key]
                operator: In
                values:
                - value1
                  value2
```

# Resource Limits
- request : minimum resource required
- limit : maximum resource allowed
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: frontend
spec:
  containers:
  - name: app
    image: images.my-company.example/app:v4
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
```

# Resource Quotas
- limit resource consumption per namespace
- kubectl create namespace [namespace]
- kubectl create quota [quota-name] --hard=[resource]=[value] -n

# Demonset
- ensure all (or some) nodes run a copy of a pod

# static pod
- managed directly by kubelet
- no replication controller
- located in /etc/kubernetes/manifests
- if you need staticPodPath changed, edit kubelet service file (/var/lib/kubelet/config.yaml)